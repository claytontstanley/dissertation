Scaling multithreaded applications on multicored machines