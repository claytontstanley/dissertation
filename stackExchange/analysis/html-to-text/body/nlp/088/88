so
i
find
myself
porting
a
game
that
wa
originally
written
for
the
win32
api
to
linux
(
well
,
porting
the
os
x
port
of
the
win32
port
to
linux
)
,
and
have
implemented
queryperformancecounter
by
giving
the
useconds
since
the
process
start
up
:
bool
queryperformancecounter
(
large_integer*
performancecount
)
{
gettimeofday
(
&
currenttimeval
,
null
)
;
performancecount-
>
quadpart
=
(
currenttimeval.tv_sec
-
starttimeval.tv_sec
)
;
performancecount-
>
quadpart
*=
(
1000
*
1000
)
;
performancecount-
>
quadpart
+=
(
currenttimeval.tv_usec
-
starttimeval.tv_usec
)
;
return
true
;
}
this
,
coupled
with
queryperformancefrequency
(
)
giving
a
constant
1000000
a
the
frequency
work
well
on
my
machine
,
giving
me
a
64
bit
variable
that
contains
useconds
since
the
program
's
start
up.
so
is
this
portable
?
i
do
n't
want
to
discover
it
work
differently
if
the
kernel
wa
compiled
in
a
certain
way
or
anything
like
that.
i
am
fine
with
it
being
non-portable
to
something
other
than
linux
,
however
.