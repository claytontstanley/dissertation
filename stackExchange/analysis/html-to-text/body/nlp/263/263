i
have
been
trying
to
implement
win32
's
messagebox
using
gtk
.
the
app
using
sdl/opengl
,
so
this
is
n't
a
gtk
app
.
i
handle
the
initialisation
(
gtk_init
)
sort
of
stuff
inside
the
messagebox
function
a
follows
:
int
messagebox
(
hwnd
hwnd
,
const
char*
text
,
const
char*
caption
,
uint
type
)
{
gtkwidget
*window
=
null
;
gtkwidget
*dialog
=
null
;
gtk_init
(
&
gtkargc
,
&
gtkargv
)
;
window
=
gtk_window_new
(
gtk_window_toplevel
)
;
g_signal_connect
(
g_object
(
window
)
,
``
delete_event
''
,
g_callback
(
delete_event
)
,
null
)
;
g_signal_connect
(
g_object
(
window
)
,
``
destroy
''
,
g_callback
(
destroy
)
,
null
)
;
//
gcallback
call
gtk_main_quit
(
)
gtk_init_add
(
(
gtkfunction
)
gcallback
,
null
)
;
if
(
type
&
mb_yesno
)
{
dialog
=
gtk_message_dialog_new
(
gtk_window
(
window
)
,
gtk_dialog_destroy_with_parent
,
gtk_message_question
,
gtk_buttons_yes_no
,
text
)
;
}
else
{
dialog
=
gtk_message_dialog_new
(
gtk_window
(
window
)
,
gtk_dialog_destroy_with_parent
,
gtk_message_info
,
gtk_buttons_ok
,
text
)
;
}
gtk_window_set_title
(
gtk_window
(
dialog
)
,
caption
)
;
gint
result
=
gtk_dialog_run
(
gtk_dialog
(
dialog
)
)
;
gtk_main
(
)
;
gtk_widget_destroy
(
dialog
)
;
if
(
type
&
mb_yesno
)
{
switch
(
result
)
{
default
:
case
gtk_response_delete_event
:
case
gtk_response_no
:
return
idno
;
break
;
case
gtk_response_yes
:
return
idyes
;
break
;
}
}
return
idok
;
}
now
,
i
am
by
no
mean
an
experienced
gtk
programmer
,
and
i
realise
that
i
'm
probably
doing
something
(
s
)
horribly
wrong
.
however
,
my
problem
is
that
the
last
dialog
popped
up
with
this
function
stay
around
until
the
process
exit
.
any
idea
?